version: "3.5"

services: 
  onlyoffice-api:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: api
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-api:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-api

  onlyoffice-api_system:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: api_system
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-api_system:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-api_system
     
  onlyoffice-urlshortener:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: urlshortener
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-urlshortener:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-urlshortener
   
  onlyoffice-studio.notify:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: studio.notify
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-studio.notify:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-studio.notify
    
  onlyoffice-notify:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: notify
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-notify:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-notify

  onlyoffice-people.server:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: people.server
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-people.server:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-people.server
    
  onlyoffice-files:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: files
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-files:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-files
    
  onlyoffice-files_services:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: files_services
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-files_services:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-files_services
    
  onlyoffice-studio:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: studio
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-studio:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-studio
   
  onlyoffice-backup:
    build:
      context: ./
      dockerfile: Dockerfile-app
      target: backup
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-backup:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-backup
    
  onlyoffice-nginx:
    build:
      context:  ./
      dockerfile: Dockerfile-app
      target: web
    image: "${REPO:-onlyoffice}/${STATUS:-}appserver-nginx:${TAG_SRV:-latest}"
    container_name: ${CONTAINER_PRIFIX:-onlyoffice}-${NGINX_HOST:-nginx}
